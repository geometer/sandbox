<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
.gsb-tree {
	margin: 30px;
}

.gsb-tree ul {
  list-style-type: none;
  padding-left: 20px;
  display: none;
}

.gsb-tree li.open > ul {
  display: block;
}

.gsb-tree > ul {
  margin: 0;
  padding: 0;
  display: block;
}

.gsb-tree li {
	pointer-events: none;
}

.gsb-tree li::before {
  content: "⊡";
  color: #888888;
  display: inline-block;
	font-size: 16pt;
	width: 16px;
	height: 16px;
  margin-right: 6px;
	pointer-events: auto;
}

.gsb-tree li.closed.empty, .gsb-tree li.open.empty {
  cursor: auto;
}

.gsb-tree li.closed, .gsb-tree li.open {
  cursor: pointer;
}

.gsb-tree li {
  cursor: auto;
}

.gsb-tree li.closed::before {
  content: "⊞";
}

.gsb-tree li.open::before {
  content: "⊟";
}

.gsb-tree li.empty.closed::before, .gsb-tree li.empty.open::before {
  content: "⊡";
}
	</style>
</head>
<body>
<div class='gsb-tree' id='gsb-tree'>
<div style='margin-bottom:16px;'>
  <input type='checkbox' id='checkbox' onclick='toggleNonEssential()'>
Show non-essential properties
</div>
$$TREE$$
</div>
</html>
<script type='text/javascript'>
root = document.getElementById('gsb-tree');
root.querySelectorAll('li').forEach(item => {
	if (item.querySelector('ul') == null) {
		return;
	}
	item.classList.add('closed');
	item.classList.remove('open');
	item.addEventListener('click', function(e) {
		this.classList.toggle('open');
		this.classList.toggle('closed');
		e.stopPropagation();
	});
});
function toggleNonEssential() {
	props = root.querySelectorAll('.normal');
	if (root.querySelector('#checkbox').checked) {
		props.forEach(item => { item.style.display='block'; });
	} else {
		props.forEach(item => { item.style.display='none'; });
	}
	root.querySelectorAll('li').forEach(item => {
		list = item.querySelector('ul');
		if (list == null) {
			return;
		}
		console.debug(list);
		console.debug(list.children.length);
		hasVisibleChildren = false;
		for (i = 0; i < list.children.length; i++) {
			console.debug(list.children[i].style);
			if (list.children[i].style.display != 'none') {
				hasVisibleChildren = true;
				break;
			}
		}
		if (!hasVisibleChildren) {
			item.classList.add('empty');
		} else {
			item.classList.remove('empty');
		}
	});
};
toggleNonEssential();
</script>
</body>
